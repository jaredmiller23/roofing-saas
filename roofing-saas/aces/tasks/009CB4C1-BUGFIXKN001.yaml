apiVersion: aces/v1
kind: TaskSpec
metadata:
  id: 009CB4C1-BUGFIXKN001
  title: 'BUG-FIX: Knock page map - UI element overlap behind map type selector'
  created: 2025-12-18 19:44:31.401593
  priority: 5
  archon_task_id: 009cb4c1-ef5b-4292-9dbc-a001c5a161a4
  template: bug-fix
context:
  goal: On the Knock page map view, there appears to be a UI element (possibly an
    indicator or notification with orange border) overlapping or peeking out from
    behind the map type selector controls (Map | Satellite | Hybrid | Terrain)
  why: 'VISIBLE ISSUE:

    - Orange border/outline visible around the map type selector

    - Suggests another element is positioned behind it but partially visible

    - May be a z-index issue or mispositioned element


    LOCATION:

    - Top right area of the map

    - Behind the Map/Satellite/Hybrid/Terrain selector buttons


    FILES TO CHECK:

    - app/[locale]/(dashboard)/knocks/page.tsx

    - Look for any indicators, alerts, or positioned elements in the map area

    - Check z-index values of map controls vs other overlays


    POSSIBLE CAUSES:

    - Orphaned pin indicator with wrong positioning

    - Territory boundary indicator

    - Some status indicator with incorrect z-index

    - Element that should be hidden but is showing'
  success_criteria:
  - Bug is fixed and no longer reproducible
  - No regressions introduced
  - Test added to prevent regression
  - TypeScript compilation succeeds
  - Linting passes with no warnings
  - Build process completes successfully
  background: 'On the Knock page map view, there appears to be a UI element (possibly
    an indicator or notification with orange border) overlapping or peeking out from
    behind the map type selector controls (Map | Satellite | Hybrid | Terrain).


    VISIBLE ISSUE:

    - Orange border/outline visible around the map type selector

    - Suggests another element is positioned behind it but partially visible

    - May be a z-index issue or mispositioned element


    LOCATION:

    - Top right area of the map

    - Behind the Map/Satellite/Hybrid/Terrain selector buttons


    FILES TO CHECK:

    - app/[locale]/(dashboard)/knocks/page.tsx

    - Look for any indicators, alerts, or positioned elements in the map area

    - Check z-index values of map controls vs other overlays


    POSSIBLE CAUSES:

    - Orphaned pin indicator with wrong positioning

    - Territory boundary indicator

    - Some status indicator with incorrect z-index

    - Element that should be hidden but is showing'
scope:
  modify:
  - '**/*.ts'
  - '**/*.tsx'
  - '**/*.js'
  - '**/*.jsx'
  create:
  - '**/*.test.ts'
  - '**/*.test.tsx'
  do_not_touch:
  - package.json
  - package-lock.json
  - yarn.lock
  - .git/**
  - node_modules/**
  - dist/**
  - build/**
  constraints:
  - Follow existing code patterns
  - Maintain TypeScript compliance
  - Do not break existing functionality
read_first:
- path: README.md
  reason: Understanding project structure and conventions
  required: true
  extract: []
- path: '**/*.test.ts'
  reason: Understanding existing test coverage
  required: false
  extract: []
changes: []
validation:
  pre_commit:
  - command: npm run typecheck
    expect: 'exit_code: 0'
    required: true
    timeout: 120
  - command: npm run lint -- --max-warnings 5
    expect: 'exit_code: 0'
    required: true
    timeout: 60
  - command: npm run test
    expect: 'exit_code: 0'
    required: true
    timeout: 300
  post_commit: []
  assertions: []
